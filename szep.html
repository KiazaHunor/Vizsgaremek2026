<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fizz Liga</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #101820;
      color: #f0f0f0;
      margin: 0;
      padding: 0;
    }

    header {
      background: linear-gradient(135deg, #1f418a, #203a43, #688616);
      color: white;
      text-align: center;
      padding: 20px 0;
      border-radius: 0 0 15px 15px;
      box-shadow: 0 -5px 15px rgba(190, 11, 11, 0.2);
    }

    header h1 {
      font-size: 3rem;
      margin: 0;
    }

    #logo {
      height: 60px;
      width: 225px;
      vertical-align: middle;
      margin-left: 20px;
    }

    .navbar {
      display: flex;
      justify-content: center;
      background-color: rgba(0, 0, 0, 0.2);
      padding: 10px 0;
      border-radius: 10px;
      margin-top: 10px;
    }

    .navbar .navbar-brand {
      color: #FFD166;
      font-size: 1.3rem;
      font-weight: bold;
      margin: 0 15px;
      transition: all 0.3s ease;
    }

    .navbar .navbar-brand:hover {
      color: #06D6A0;
      transform: translateY(-3px) scale(1.1);
      text-decoration: underline;
    }

    #section-game {
      background-image: url(gamehat.jpg);
      background-image: url(gamehat.jpg);
      background-size: cover;
      background-position: center;
      background-blend-mode: multiply;
      background-color: #1c1c1ca6;
      border-radius: 15px;
      padding: 50px 20px;
      margin: 20px 0;
      text-align: center;
      color: #f0f0f0;
      box-shadow: 0 -5px 15px rgba(20, 156, 3, 0.2);
    }

    aside {
      background-color: #1c1c1c;
      border-radius: 15px;
      padding: 50px 20px;
      margin-bottom: 50px;
      text-align: center;
      color: #f0f0f0;
      box-shadow: 0 -5px 15px rgba(20, 156, 3, 0.2);
    }


    #jatekgomb svg {
      transition: transform 0.3s ease;
    }

    #jatekgomb svg:hover {
      transform: scale(1.2) rotate(8deg);
    }

    article {
      background-color: #1c1c1c;
      border-radius: 10px;
      margin-bottom: 20px;
      padding: 15px;
      margin-top: 20px;
      box-shadow: 0 -5px 15px rgba(20, 156, 3, 0.2);
    }

    #tabella table {
      color: #f0f0f0;
    }

    #tabella th {
      background-color: #203a43;
    }

    #tabella td {
      background-color: #1c1c1c;
    }

    .news-card {
      color: white;
      background: linear-gradient(135deg,  #3f5307, #203a43,#1f418a);
      border-radius: 10px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .news-card:hover {
      transform: translateY(-5px) scale(1.01);
      background-color: #ffffff;
      color: white;
      box-shadow: 0 -5px 15px rgba(16, 156, 3, 0.308);
    }

    footer {
      background-color: #203a4377;
      color: #FFD166;
      font-weight: bold;
      text-align: center;
      font-size: 1.5rem;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      box-shadow: 0 -5px 15px rgba(20, 156, 3, 0.2);
    }
  </style>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <header class="col-12">
        <h1 class="text-center p-3"><b>Fizz Liga</b>
          <img id="logo" src="Fizz_Liga_NBI.png" alt="Fizz Liga">
        </h1>
        <nav class="navbar navbar-dark">
          <div class="col-4 p-2">
            <div class="navbar-brand" href=""></div>
          </div>
          <div class="col-2">
            <a class="navbar-brand" href="#" id="mutattab">Tabella</a>
          </div>
          <div class="col-2">
            <a class="navbar-brand" href="#">Kapcsolat</a>
          </div>
          <div class="col-2">
            <a class="navbar-brand" href="#">Névjegy</a>
          </div>
          <div class="col-2">
            <a id="bejel" class="navbar-brand" href="bejelentkezo/frontend/index.html">Bejelenkezés</a>
          </div>
        </nav>
      </header>
    </div>
    <div class="row">
      <div class="col-8">
        <section id="section-game">
          <h3>Fizz Liga Draft Játék</h3>
          <div id="jatekgomb">
            <a class="navbar-brand" href="game.html"><svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"
                fill="currentColor" class="bi bi-play-circle-fill" viewBox="0 0 16 16">
                <path
                  d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814z" />
              </svg></a>
          </div>
        </section>


        <article>
          <h3>Fizz Liga Tabella</h3>
          <div id="tabella">Betöltés...</div>
        </article>
      </div>
      <aside class="col-4">
        <h3>Aktuális hírek</h3>
        <hr>
        <div class="row" id="news-container"></div>
      </aside>


    </div>
    <div class="row">
      <footer>Készitették Mi</footer>
    </div>




  </div>



  <script>
    // ITT A HIREK VANNAK
    const RSS_URL = "https://www.fociclub.hu/?cat=11&feed=rss2";

    function fetchRSS() {

      fetch("https://corsproxy.io/?" + RSS_URL)
        .then(response => response.text())
        .then(text => {
          const parser = new DOMParser();
          const xml = parser.parseFromString(text, "text/xml");
          const items = xml.querySelectorAll("item");

          const newsContainer = document.getElementById("news-container");
          newsContainer.innerHTML = "";

          items.forEach((item, i) => {
            if (i >= 6) return;

            const title = item.querySelector("title")?.textContent || "Cím nélkül";
            const link = item.querySelector("link")?.textContent || "#";
            const description = item.querySelector("description")?.textContent || "";

            const cleanDesc = description.replace(/<[^>]*>/g, '').substring(0, 150) + '...';

            const col = document.createElement("div");
            col.className = "col-12 mb-4";
            col.innerHTML = `
            <div class="card news-card h-100" onclick="window.open('${link}', '_blank')">
              <div class="card-body">
                <h5 class="card-title">${title}</h5>
                <p class="card-text">${cleanDesc}</p>
              </div>
            </div>
          `;
            newsContainer.appendChild(col);
          });
        })
        .catch(err => {
          console.error("RSS hiba:", err);
          document.getElementById("news-container").innerHTML =
            `<div class="alert alert-danger">Hiba a hírek betöltésénél</div>`;
        });
    }

    fetchRSS();
    setInterval(fetchRSS, 30000);
    //TABELLA



    function loadTabella() {
      fetch("tabella.php")
        .then(r => r.json())
        .then(data => {
          if (data.error) {
            document.getElementById("tabella").innerHTML =
              `<div class="alert alert-danger">${data.error}</div>`;
            return;
          }

          let html = `<table class="table table-dark table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Csapat</th>
          <th>M</th>
          <th>Gy</th>
          <th>D</th>
          <th>V</th>
          <th>Pont</th>
        </tr>
      </thead><tbody>`;

          data.forEach(r => {
            html += `<tr>
          <td>${r.hely}</td>
          <td>${r.csapat}</td>
          <td>${r.meccs}</td>
          <td>${r.gy}</td>
          <td>${r.d}</td>
          <td>${r.v}</td>
          <td>${r.pont}</td>
        </tr>`;
          });

          html += "</tbody></table>";
          document.getElementById("tabella").innerHTML = html;
        })
        .catch(() => {
          document.getElementById("tabella").innerHTML =
            `<div class="alert alert-danger">Betöltési hiba</div>`;
        });
    }

    loadTabella();
    setInterval(loadTabella, 60000);
  </script>

</body>

</html>